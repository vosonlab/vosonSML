<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to vosonSML • vosonSML</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to vosonSML">
<meta property="og:description" content="vosonSML">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vosonSML</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.29.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    Changelog
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-cubes"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Intro-to-vosonSML.html">Introduction to vosonSML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://vosonlab.net/">
    <span class="fa fa-flask fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/vosonlab">
    <span class="fa fa-twitter-square fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/vosonlab/vosonSML">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Intro-to-vosonSML_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to vosonSML</h1>
            <h3 class="subtitle">VOSON Lab, Australian National University</h3>
                        <h4 class="author">Robert Ackland, Bryan Gertzel, Francisca Borquez</h4>
            
            <h4 class="date">21 April, 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/vosonlab/vosonSML/blob/master/vignettes/Intro-to-vosonSML.Rmd"><code>vignettes/Intro-to-vosonSML.Rmd</code></a></small>
      <div class="hidden name"><code>Intro-to-vosonSML.Rmd</code></div>

    </div>

    
    
<p>The following guide provides an introduction to using <a href="https://github.com/vosonlab/vosonSML">vosonSML</a>, which is available both on GitHub and <a href="https://cran.r-project.org/package=vosonSML">CRAN</a>. More resources are available on the VOSON Lab website (<a href="http://vosonlab.net/socialmedialab">vosonSML</a> and <a href="http://vosonlab.net/training_workshops">training materials</a>). For a full list of functions, please refer to the <a href="https://vosonlab.github.io/vosonSML/reference/index.html">reference page</a>. The companion package to <code>vosonSML</code> is <a href="https://github.com/vosonlab/VOSONDash">VOSON Dashboard</a>, which provides an R/Shiny graphical user interface for data collection (via <code>vosonSML</code>), network and text analysis.</p>
<p>To use <code>vosonSML</code>, you first need to it and the <code>magrittr</code> package into the session:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">vosonSML</span>)</pre></body></html></div>
<p>There are three steps involved in data collection and network creation using <code>vosonSML</code>. These are:</p>
<ol style="list-style-type: decimal">
<li>
<em>Authenticate</em> with the platform API, using the function <code><a href="../reference/Authenticate.html">Authenticate()</a></code>
</li>
<li>
<em>Collect</em> data from the API and store it for later use, using <code><a href="../reference/Collect.html">Collect()</a></code>
</li>
<li>
<em>Create</em> networks from the collected data, using <code><a href="../reference/Create.html">Create()</a></code> and <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>
</li>
</ol>
<div id="twitter" class="section level1">
<h1 class="hasAnchor">
<a href="#twitter" class="anchor"></a>Twitter</h1>
<p>Twitter data are collected via <a href="https://cran.r-project.org/package=rtweet">rtweet</a>.</p>
<div id="authenticating-with-the-twitter-api" class="section level2">
<h2 class="hasAnchor">
<a href="#authenticating-with-the-twitter-api" class="anchor"></a>Authenticating with the Twitter API</h2>
<p>The first step is to authorise access to the Twitter API. There are two ways of generating an access token. The “Dev Auth” approach involves authenticating using Twitter developer app API keys, which can be created after the user has been granted a <a href="https://developer.twitter.com/en/apply-for-access">Twitter developer account</a>:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">myDevKeys</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">appName</span> <span class="kw">=</span> <span class="st">"My App"</span>, <span class="kw">apiKey</span> <span class="kw">=</span> <span class="st">"xxxxxxxxxxxx"</span>, <span class="kw">apiSecret</span> <span class="kw">=</span> <span class="st">"xxxxxxxxxxxx"</span>,
                  <span class="kw">accessToken</span> <span class="kw">=</span> <span class="st">"xxxxxxxxxxxx"</span>, <span class="kw">accessTokenSecret</span> <span class="kw">=</span> <span class="st">"xxxxxxxxxxxx"</span>)

<span class="no">twitterAuth</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/Authenticate.html">Authenticate</a></span>(<span class="st">"twitter"</span>, <span class="kw">appName</span> <span class="kw">=</span> <span class="no">myDevKeys</span>$<span class="no">appName</span>, <span class="kw">apiKey</span> <span class="kw">=</span> <span class="no">myDevKeys</span>$<span class="no">apiKey</span>,
                            <span class="kw">apiSecret</span> <span class="kw">=</span> <span class="no">myDevKeys</span>$<span class="no">apiSecret</span>, <span class="kw">accessToken</span> <span class="kw">=</span> <span class="no">myDevKeys</span>$<span class="no">accessToken</span>,
                            <span class="kw">accessTokenSecret</span> <span class="kw">=</span> <span class="no">myDevKeys</span>$<span class="no">accessTokenSecret</span>)</pre></body></html></div>
<p>The “Web Auth” approach undertakes Twitter authentication via user authorisation of an app that the user has access to (either because the user created the app, or else it was created by a third-party and access granted to the user). This will open a web browser, prompting the user to log into Twitter and authorise the app using Twitter app’s consumer key and secret. The Web Auth approach therefore does not require a Twitter developer account, as long as the user has a Twitter account and access to a Twitter app.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">twitterAuth</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/Authenticate.html">Authenticate</a></span>(<span class="st">"twitter"</span>, <span class="kw">appName</span> <span class="kw">=</span> <span class="st">"An App"</span>,
                              <span class="kw">apiKey</span> <span class="kw">=</span> <span class="st">"xxxxxxxxxxxx"</span>, <span class="kw">apiSecret</span> <span class="kw">=</span> <span class="st">"xxxxxxxxxxxx"</span>)</pre></body></html></div>
<p>In both cases, Twitter authentication creates an access token, which can be re-used by saving it to disk:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(<span class="no">twitterAuth</span>, <span class="kw">file</span> <span class="kw">=</span> <span class="st">"twitter_auth"</span>)</pre></body></html></div>
<p>The following loads into the current session a previously-created access token:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">twitterAuth</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="st">"twitter_auth"</span>)</pre></body></html></div>
</div>
<div id="collecting-data-from-twitter" class="section level2">
<h2 class="hasAnchor">
<a href="#collecting-data-from-twitter" class="anchor"></a>Collecting Data from Twitter</h2>
<p>The syntax for collecting Twitter data follow <a href="https://developer.twitter.com/en/docs/tweets/rules-and-filtering/overview/standard-operators">Twitter’s rules and filtering documentation</a>. It is possible to collect tweets including particular terms (e.g. hashtags), and boolean searches (see <a href="https://developer.twitter.com/en/docs/tweets/rules-and-filtering/overview/standard-operators">standard search operators</a>) are also possible. The collection may be filtered by, for example, type of Twitter activity (e.g. to include retweets only), number of collected tweets, language of tweet. As an example, the following collects 1000 recent tweets containing the ‘#auspol’ hashtag (a prominent hashtag for Australian politics), with retweets not being collected.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="no">twitterAuth</span> <span class="kw">%&gt;%</span>
               <span class="fu"><a href="../reference/Collect.html">Collect</a></span>(<span class="kw">searchTerm</span> <span class="kw">=</span> <span class="st">"#auspol"</span>, <span class="kw">numTweets</span> <span class="kw">=</span> <span class="fl">1000</span>,
                       <span class="kw">includeRetweets</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">retryOnRateLimit</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
                       <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>The <code><a href="../reference/Collect.html">Collect()</a></code> function takes the following arguments (when used for collecting Twitter data): <code>credential</code> (object generated from <code><a href="../reference/Authenticate.html">Authenticate()</a></code> with class name “twitter”(above we pass this via the pipe), <code>searchTerm</code> (character string that specifies a Twitter search term), <code>searchType</code> (character string indicating how to filter returned tweets with options ‘recent’, ‘mixed’ or ‘popular’; default type is ‘recent’), <code>numTweets</code> (numeric vector that specifies how many tweets to be collected; default is 100), <code>includeRetweets</code> (whether the search should filter out retweets or not; default is TRUE), <code>retryOnRateLimit</code> (whether to automatically pause collection when the Twitter API rate limit is reached, and then restart; default is FALSE.), <code>writeToFile</code> (whether to write the returned dataframe to disk as an <code>.rds</code> file; default is FALSE), and <code>verbose</code> (whether to output information about the data collection; default is FALSE).</p>
<p>The <code><a href="../reference/Collect.html">Collect()</a></code> function returns a tibble (an enhanced dataframe which has features that can make working with the data easier). We can view the data we just collected (the following has been modified to anonymise the data):</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">&gt; twitterData
# A tibble: 999 x 90
   user_id status_id created_at          screen_name text  source
   &lt;chr&gt;   &lt;chr&gt;     &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; 
 1 xxxxxx… xxxxxxxx… 2020-01-09 12:02:13 xxxx        "htt… Twitt…
 2 xxxxxx… xxxxxxxx… 2020-01-09 12:01:32 xxxxxxxxx   "Fir… Twitt…
 3 xxxxxx… xxxxxxxx… 2020-01-09 12:00:44 xxxxxxxxxxx "Ser… Twitt…
 [snip]
 … with 989 more rows, and 84 more variables: display_text_width &lt;dbl&gt;,
...</pre></body></html></div>
<p>Note that if you read the Twitter dataframe from disk, you will need to modify the class values for the object before you can use it with <code>vosonSML</code>. This can be done manually or by using the handy <code><a href="../reference/vosonSML-colon-colon-ImportData.html">ImportData()</a></code> function:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="st">"/path/to/data/data.rds"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">twitterData</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html">append</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">twitterData</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"datasource"</span>, <span class="st">"twitter"</span>))

<span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-ImportData.html">ImportData</a></span>(<span class="st">"/path/to/data/data.rds"</span>, <span class="st">"twitter"</span>)</pre></body></html></div>
</div>
<div id="creating-twitter-networks" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-twitter-networks" class="anchor"></a>Creating Twitter Networks</h2>
<p>It is currently possible to create four types of networks using Twitter data: (1) <em>actor network</em>; (2) <em>activity network</em>; (3) <em>two-mode network</em> and (4) <em>semantic network</em>.</p>
<div id="actor-network" class="section level3">
<h3 class="hasAnchor">
<a href="#actor-network" class="anchor"></a>Actor Network</h3>
<p>In the Twitter <em>actor network</em>, nodes are users who have either tweeted using the target search terms (#auspol in the above example) or else are mentioned or replied to in tweets featuring the search terms. Edges represent interactions between Twitter users, and an edge attribute indicates whether the interaction is a mention, reply, retweet, quoted retweet or self-loop. Self-loop edges are created in two situations: (1) a user authors a tweet and mentions or replies to themself; (2) a user authors a tweet containing the search term, but does not mention or reply to any other user in that tweet.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">actorNetwork</span> <span class="kw">&lt;-</span> <span class="no">twitterData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"actor"</span>, <span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">actorGraph</span> <span class="kw">&lt;-</span> <span class="no">actorNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("actor")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"> &gt; actorNetwork
$edges
# A tibble: 1,725 x 5
   from             to              edge_type timestamp         status_id       
   &lt;fct&gt;            &lt;fct&gt;           &lt;fct&gt;     &lt;fct&gt;             &lt;fct&gt;           
 1 xxxxxxxx         xxxxxxxx        quote     2020-01-09 12:00… xxxxxxxxxxxxxxx…
 2 xxxxxxxx         xxxxxxxxx       quote     2020-01-09 09:37… xxxxxxxxxxxxxxx…
[snip]
# … with 1,715 more rows

$nodes
# A tibble: 1,158 x 2
   user_id             screen_name   
   &lt;fct&gt;               &lt;fct&gt;         
 1 xxxxxxxx            xxxx          
 2 xxxxxxxx            xxxxxxxxx     
[snip]
# … with 1,148 more rows

attr(,"class")
[1] "list"    "network" "actor"   "twitter"</pre></body></html></div>
<p>This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object, and in the above example, the <code>writeToFile</code> parameter is used to write the graph to file in <code>GraphML</code> format. The following shows a summary of the graph:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r">&gt; actorGraph
IGRAPH bc177a6 DN-- 1158 1725 -- 
+ attr: type (g/c), name (v/c), screen_name (v/c), label (v/c),
| edge_type (e/c), timestamp (e/c), status_id (e/c)
+ edges from bc177a6 (vertex names):
 [1] xxxxxxxx           -&gt;xxxxxxxx          
 [2] xxxxxxxx           -&gt;xxxxxxxxx         
[snip]
+ ... omitted several edges</pre></body></html></div>
<p>The Twitter actor network contains a graph attribute <code>type</code> which is set to “twitter” (this attribute is required for <code>VOSON Dashboard</code>). The following node attributes are collected from the Twitter profile data: <code>name</code> (Twitter ID), <code>screen_name</code> (Twitter handle or screen name) and <code>label</code> (a concatenation of the ID and screen name). The edge attributes are: <code>edge_type</code> (whether the edge is a mention, reply, retweet, quoted retweet or self-loop), <code>timestamp</code> (when the tweet that led to the creation of the edge was authored) and <code>status_id</code> (the Twitter ID for the tweet).</p>
<p>The example actor network contains 1158 nodes and 1725 edges. The following code uses <code>igraph</code> functions to: (1) remove all edges other than reply edges; (2) construct a subnetwork consisting of the giant component (the largest set of connected nodes); (3) plot this network.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">igraph</span>)

<span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/delete_edges.html">delete.edges</a></span>(<span class="no">actorGraph</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">actorGraph</span>)$<span class="no">edge_type</span><span class="kw">!=</span><span class="st">"reply"</span>))
<span class="no">cc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/components.html">clusters</a></span>(<span class="no">g2</span>)
<span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/subgraph.html">induced_subgraph</a></span>(<span class="no">g2</span>,<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">cc</span>$<span class="no">membership</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span>(<span class="no">cc</span>$<span class="no">csize</span>)))
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"twitter_actor_reply_gc.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">g2</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/twitter_actor_reply_gc.png" alt=""><p class="caption">Twitter actor network - replies only - giant component</p>
</div>
<p>It is often useful to have the tweet text content in the network. This can be achieved by using the <code>status_id</code> edge attribute to pull the tweet text content from the dataframe returned by <code><a href="../reference/Collect.html">Collect()</a></code>, and store it as an edge attribute. <code>vosonSML</code> makes this easy with the <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> function, with the following example creating a graph with an edge attribute <code>vosonTxt_tweet</code> which stores the tweet text content.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">actorGraphWithText</span> <span class="kw">&lt;-</span> <span class="no">twitterData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"actor"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">twitterData</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>()</pre></body></html></div>
<p>Now we have tweet text cotent stored as an edge attribute, we can use it for text analysis or creating new node attributes. As an example, the following creates a new node attribute <code>tweetedBushfires</code> which has the value “yes” if the Twitter user authored at least one tweet containing the word “bushfire” and “no” otherwise.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="co">#vector of igraph vertices - the users who tweeted with "bushfire" </span>
<span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/tail_of.html">tail_of</a></span>(<span class="no">actorGraphWithText</span>,<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"bushfire"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">actorGraphWithText</span>)$<span class="no">vosonTxt_tweet</span>)))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraphWithText</span>)$<span class="no">tweetedBushfires</span> <span class="kw">&lt;-</span> <span class="st">"no"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraphWithText</span>)$<span class="no">tweetedBushfires</span>[<span class="no">ind</span>] <span class="kw">&lt;-</span> <span class="st">"yes"</span></pre></body></html></div>
<p>The following creates and plots the giant component in the reply network, with red nodes indicating those users who tweeted using the term “bushfire”.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">g3</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/delete_edges.html">delete.edges</a></span>(<span class="no">actorGraphWithText</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">actorGraphWithText</span>)$<span class="no">edge_type</span><span class="kw">!=</span><span class="st">"reply"</span>))
<span class="no">cc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/components.html">clusters</a></span>(<span class="no">g3</span>)
<span class="no">g3</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/subgraph.html">induced_subgraph</a></span>(<span class="no">g3</span>,<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">cc</span>$<span class="no">membership</span> <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span>(<span class="no">cc</span>$<span class="no">csize</span>)))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g3</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g3</span>)$<span class="no">tweetedBushfires</span><span class="kw">==</span><span class="st">"yes"</span>,<span class="st">"red"</span>,<span class="st">"grey"</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"twitter_actor_reply_gc_bushfires.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">g3</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/twitter_actor_reply_gc_bushfires.png" alt=""><p class="caption">Twitter actor network - replies only - giant component (red nodes indicate who tweeted at least once about bushfires)</p>
</div>
<p>The <code>igraph</code> graph object can then be saved to disk as a <code>GraphML</code> file using the <code>igraph</code> function <code>write.graph</code>, and later imported into network analysis software such as <code>igraph</code>, <code>VOSON Dashboard</code> and <a href="https://gephi.org/">Gephi</a>:</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/write_graph.html">write.graph</a></span>(<span class="no">g3</span>, <span class="st">"twitter_reply_gc_bushfires.graphml"</span>, <span class="kw">format</span><span class="kw">=</span><span class="st">"graphml"</span>)</pre></body></html></div>
<p>Finally, the <code><a href="../reference/vosonSML-colon-colon-AddUserData.html">AddUserData()</a></code> function can be used to create additional node attributes from the Twitter profile, for example, number of followers and number of tweets authored by the user.</p>
<p>Note that by default, <code>vosonSML</code> will only collect Twitter profile data for those users who authored tweets that have been collected. That is, in the above example, profile data will not be collected (by default) for a user who was mentioned in a tweet that contained #auspol, but did not author such a tweet. The <code>lookupUsers</code> argument can be used to make additional Twitter API calls and collect the profile data for mentioned users whose profile data is absent, so that their additional profile attributes can also be added:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">actorGraphWithUserAttr</span> <span class="kw">&lt;-</span> <span class="no">actorNetwork</span> <span class="kw">%&gt;%</span>
                          <span class="fu"><a href="../reference/vosonSML-colon-colon-AddUserData.html">AddUserData</a></span>(<span class="no">twitterData</span>,
                                      <span class="kw">lookupUsers</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
                                      <span class="kw">twitterAuth</span> <span class="kw">=</span> <span class="no">twitterAuth</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
</div>
<div id="activity-network" class="section level3">
<h3 class="hasAnchor">
<a href="#activity-network" class="anchor"></a>Activity Network</h3>
<p>In the Twitter <em>activity network</em>, nodes represent tweets and edge types are: replies, retweets and quoted retweets.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">activityNetwork</span> <span class="kw">&lt;-</span> <span class="no">twitterData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"activity"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">twitterData</span>)
<span class="no">activityGraph</span> <span class="kw">&lt;-</span> <span class="no">activityNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("activity")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r">&gt; activityNetwork
$nodes
# A tibble: 1,408 x 5
   status_id    user_id    screen_name created_at   vosonTxt_tweet              
   &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;                       
 1 xxxxxxxxxxx… xxxxxxxx   xxxx        2020-01-09 … "xxxxxxxxxxxxxxxxxxxxxxxxxx…
 2 xxxxxxxxxxx… xxxxxxxx   xxxxxxxxx   2020-01-09 … "xxxxxxxxxxxxxxxxxxxxxxxxxx…
 [snip]
 # … with 1,398 more rows

$edges
# A tibble: 662 x 3
   from                to                  edge_type
   &lt;chr&gt;               &lt;chr&gt;               &lt;chr&gt;    
 1 xxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxx quote    
 2 xxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxx quote    
[snip]
# … with 652 more rows

attr(,"class")
[1] "list"       "network"    "activity"   "twitter"    "voson_text"</pre></body></html></div>
<p>Note that in the above, <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> was used to add the comment text data to the network dataframe, stored as a node attribute. This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object (the following has been anonymised):</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r">&gt; activityGraph
IGRAPH e60c486 DN-- 1408 662 -- 
+ attr: type (g/c), name (v/c), user_id (v/c), screen_name (v/c),
| created_at (v/c), vosonTxt_tweet (v/c), label (v/c), edge_type (e/c)
+ edges from e60c486 (vertex names):
 [1] xxxx-&gt;xxxx
 [2] xxxx-&gt;xxxx
[snip]
+ ... omitted several edges</pre></body></html></div>
<p>The Twitter activity network contains a graph attribute <code>type</code> (set to “twitter”). The node attributes are: <code>name</code> (Twitter ID for the tweet), <code>user_id</code> (Twitter ID for the user who authored the tweet), <code>screen_name</code> (Twitter handle or screen name of the user who authored the tweet), <code>created_at</code> (timestamp when the tweet was authored), <code>vosonTxt_tweet</code> (text content of the tweet) and <code>label</code> (a concatenation of <code>name</code> and <code>user_id</code>). The edge attribute is <code>edge_type</code> which can have the value ‘reply’, ‘retweet’ or ‘quote’.</p>
<p>The example Twitter activity network contains 1408 nodes and 662 edges. The following is a visualisation of the network, where the post is indicated by a red node, and blue indicates those comments that include the words “arson” or “starting fires”.</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="no">cc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/components.html">clusters</a></span>(<span class="no">activityGraph</span>)
<span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/subgraph.html">induced_subgraph</a></span>(<span class="no">activityGraph</span>,<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">cc</span>$<span class="no">membership</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">cc</span>$<span class="no">csize</span><span class="kw">&gt;</span><span class="fl">5</span>)))
<span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"bushfire"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">vosonTxt_tweet</span>))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="st">"grey"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">color</span>[<span class="no">ind</span>] <span class="kw">&lt;-</span> <span class="st">"red"</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"twitter_activity.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">g2</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/twitter_activity.png" alt=""><p class="caption">Twitter activity network (red indicates tweets mentioning bushfires)</p>
</div>
<p>It should be noted that a limitation of the Twitter API is that retweet chains are not provided. That is: if user <em>i</em> tweeted an original tweet, and then user <em>j</em> retweeted this tweet, and user <em>k</em> retweeted <em>j</em>’s retweet, the activity network will show edges connecting the two retweets to the original tweet.</p>
</div>
<div id="two-mode-network" class="section level3">
<h3 class="hasAnchor">
<a href="#two-mode-network" class="anchor"></a>Two-mode Network</h3>
<p>In the Twitter <em>two-mode network</em>, the two types of nodes are actors (Twitter users) and hashtags. There is an edge from user <em>i</em> to hashtag <em>j</em> if user <em>i</em> authored a tweet containing hashtag <em>j</em>.</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="no">twomodeNetwork</span> <span class="kw">&lt;-</span> <span class="no">twitterData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"twomode"</span>, <span class="kw">removeTermsOrHashtags</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"#auspol"</span>))
<span class="no">twomodeGraph</span> <span class="kw">&lt;-</span> <span class="no">twomodeNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("twomode")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity). Note that in this example, the <code>removeTermsOrHashtags</code> argument was used to exclude ‘#auspol’, since by construction all tweets contained this hashtag.</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r">&gt; twomodeNetwork
$nodes
# A tibble: 1,146 x 2
   entity_id                    display_name                
   &lt;chr&gt;                        &lt;chr&gt;                       
 1 xxxxxxxx                     xxxx                        
 2 xxxxxxxx                     xxxxxxxxx                   
 3 #auspol2020                  #auspol2020                 
 4 #australianbushfiredisaster  #australianbushfiredisaster 
[snip]
# … with 1,136 more rows

$edges
# A tibble: 1,675 x 5
   from      to                      edge_type timestamp        status_id       
   &lt;fct&gt;     &lt;fct&gt;                   &lt;fct&gt;     &lt;fct&gt;            &lt;fct&gt;           
 1 xxxxxxxx  #auspol2020             hashtag   2020-01-09 12:0… xxxxxxxxxxxxxxx…
 2 xxxxxxxx  #australianbushfiredis… hashtag   2020-01-09 12:0… xxxxxxxxxxxxxxx…
[snip]
# … with 1,665 more rows

attr(,"class")
[1] "list"    "network" "twomode" "twitter"</pre></body></html></div>
<p>This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object (this has been anonymised):</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r">&gt; twomodeGraph
IGRAPH 68bd240 DN-- 1146 1675 -- 
+ attr: type (g/c), name (v/c), display_name (v/c), label (v/c),
| edge_type (e/c), timestamp (e/c), status_id (e/c)
+ edges from 68bd240 (vertex names):
 [1] xxxx -&gt; #auspol2020                 
 [2] xxxx -&gt; #australianbushfiredisaster 
[snip]
+ ... omitted several edges</pre></body></html></div>
<p>The Twitter two-model network has a graph attribute <code>type</code> (set to “twitter”). The node attributes are: <code>name</code> (hashtag or Twitter user ID), <code>display_name</code> (hashtag or Twitter handle or screen name), <code>label</code> (for users, a concatenation of <code>name</code> and <code>display_name</code>, while for hashtags it is <code>name</code>). The edge attributes are: <code>edge_type</code> (‘hashtag’), <code>timestamp</code> (timestamp of the tweet that led to the edge), <code>status_id</code> (Twitter ID of the tweet that led to the edge).</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/degree.html">degree</a></span>(<span class="no">twomodeGraph</span>, <span class="kw">mode</span><span class="kw">=</span><span class="st">"in"</span>), <span class="kw">decreasing</span><span class="kw">=</span><span class="fl">TRUE</span>)[<span class="fl">1</span>:<span class="fl">5</span>] <span class="co"># top-5 hashtags</span>
<span class="co"># users who tweet with these hashtags</span>
<span class="no">ind2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">ind</span>, <span class="kw">function</span>(<span class="no">x</span>){<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/neighbors.html">neighbors</a></span>(<span class="no">twomodeGraph</span>, <span class="no">x</span>, <span class="kw">mode</span><span class="kw">=</span><span class="st">"in"</span>)}))
<span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/subgraph.html">induced_subgraph</a></span>(<span class="no">twomodeGraph</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">ind</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="no">ind2</span>)))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="st">"grey"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">color</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/degree.html">degree</a></span>(<span class="no">g2</span>, <span class="kw">mode</span><span class="kw">=</span><span class="st">"in"</span>)<span class="kw">&gt;</span><span class="fl">0</span>)] <span class="kw">&lt;-</span> <span class="st">"blue"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">label2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/degree.html">degree</a></span>(<span class="no">g2</span>, <span class="kw">mode</span><span class="kw">=</span><span class="st">"in"</span>)<span class="kw">&gt;</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">label</span>, <span class="st">""</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"twitter_twomode.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">g2</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">label2</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>, <span class="kw">vertex.label.cex</span><span class="kw">=</span><span class="fl">1.8</span>,
     <span class="kw">vertex.label.color</span><span class="kw">=</span><span class="st">"red"</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/twitter_twomode.png" alt=""><p class="caption">Twitter twomode network - top-5 hashtags, and the users who tweeted them</p>
</div>
</div>
<div id="semantic-network" class="section level3">
<h3 class="hasAnchor">
<a href="#semantic-network" class="anchor"></a>Semantic Network</h3>
<p>In the Twitter <em>semantic network</em>, nodes represent entities extracted from the tweet text: common words, hashtags and usernames. Edges reflect co-occurrence i.e. there is an edge between entities <em>i</em> and <em>j</em> if they both occurred in the same tweet.</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="no">semanticNetwork</span> <span class="kw">&lt;-</span> <span class="no">twitterData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"semantic"</span>,
                                          <span class="kw">removeTermsOrHashtags</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"#auspol"</span>, <span class="st">"auspol"</span>, <span class="st">"australia"</span>),
                                          <span class="kw">termFreq</span> <span class="kw">=</span> <span class="fl">5</span>)
<span class="no">semanticGraph</span> <span class="kw">&lt;-</span> <span class="no">semanticNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">directed</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("semantic")</a></code> returns a named list containing two dataframes named “nodes” and “edges”:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r">&gt; semanticNetwork
$nodes
# A tibble: 799 x 1
   value 
   &lt;fct&gt; 
 1 just  
 2 one   
 3 fire  
 4 going 
 5 still 
 6 hard  
 7 trying
 8 since 
 9 try   
10 sick  
# … with 789 more rows

$edges
# A tibble: 10,990 x 3
   from        to                           weight
   &lt;fct&gt;       &lt;fct&gt;                         &lt;int&gt;
 1 #auspol2020 #australianbushfiredisaster       2
 2 #auspol2020 government                        2
 3 #auspol2020 fire                              4
 4 #auspol2020 australian                        2
 5 #auspol2020 bushfire                          2
 6 #auspol2020 fires                             4
 7 #auspol2020 #australiafires                   1
 8 #auspol2020 #australianbushfiresdisaster      1
 9 #auspol2020 #australia                        4
10 #auspol2020 bushfires                         2
# … with 10,980 more rows

attr(,"class")
[1] "list"     "network"  "semantic" "twitter" </pre></body></html></div>
<p>The <code>removeTermsOrHashtags</code> argument is used to exclude terms that we can expect to occur frequently (e.g. because of the parameters used for the data collection). The <code>termFreq</code> parameter is used to limit the network to the top 5 percent most frequently occurring entities.</p>
<p>This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object:</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r">&gt; semanticGraph
IGRAPH cb8c381 UNW- 799 10990 -- 
+ attr: type (g/c), name (v/c), label (v/c), weight (e/n)
+ edges from cb8c381 (vertex names):
 [1] #australianbushfiredisaster --#auspol2020
 [2] government                  --#auspol2020
 [3] fire                        --#auspol2020
 [4] australian                  --#auspol2020
 [5] bushfire                    --#auspol2020
 [6] fires                       --#auspol2020
 [7] #australiafires             --#auspol2020
 [8] #australianbushfiresdisaster--#auspol2020
+ ... omitted several edges</pre></body></html></div>
<p>The Twitter semantic network node contains a graph attribute <code>type</code> (set to “twitter”). The node attributes are: <code>name</code> (the entity i.e. hashtag or word), <code>label</code> (same as <code>name</code>). The edge attribute is <code>weight</code> (how many tweets the two entities co-occurred in).</p>
<p>The example Twitter semantic network has 799 nodes and 10990 edges. The following produces a visualisation of subnetwork of terms that contain the string “bushfire”:</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"bushfire"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">semanticGraph</span>)$<span class="no">name</span>))
<span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/subgraph.html">induced_subgraph</a></span>(<span class="no">semanticGraph</span>,<span class="no">ind</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"twitter_semantic.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">g2</span>, <span class="kw">layout</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/layout_with_lgl.html">layout_with_lgl</a></span>(<span class="no">g2</span>), <span class="kw">vertex.shape</span><span class="kw">=</span><span class="st">"none"</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.width</span><span class="kw">=</span><span class="fl">1</span>+<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">g2</span>)$<span class="no">weight</span>))
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/twitter_semantic.png" alt=""><p class="caption">Twitter semantic network - entities containing the word “bushfire” (edge thickness proportional to edge weight)</p>
</div>
</div>
</div>
</div>
<div id="youtube" class="section level1">
<h1 class="hasAnchor">
<a href="#youtube" class="anchor"></a>YouTube</h1>
<div id="authenticating-with-the-youtube-api" class="section level2">
<h2 class="hasAnchor">
<a href="#authenticating-with-the-youtube-api" class="anchor"></a>Authenticating with the YouTube API</h2>
<p>To collect YouTube data, it is necessary to first create a Google app with access to the YouTube Data API via the <a href="https://console.developers.google.com/apis">Google APIs console</a> and generate an associated API key. The following shows the creation of a YouTube access token by passing a Google developer API key to the <code>Autnenticate()</code> function:</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="no">myAPIKey</span> <span class="kw">&lt;-</span> <span class="st">"xxxxxxxxxxxx"</span>
<span class="no">youtubeAuth</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/Authenticate.html">Authenticate</a></span>(<span class="st">"youtube"</span>, <span class="kw">apiKey</span> <span class="kw">=</span> <span class="no">myAPIKey</span>)</pre></body></html></div>
<p>As with the Twitter example above, the YouTube access token can optionally be saved to disk for use in a later session.</p>
</div>
<div id="collecting-data-from-youtube" class="section level2">
<h2 class="hasAnchor">
<a href="#collecting-data-from-youtube" class="anchor"></a>Collecting Data from YouTube</h2>
<p>The YouTube video IDs (the part after “=” in the YouTube URL) are required in order to collect YouTube comment data. These IDs can either be manually extracted or else automatically extracted from the URLs with the following command:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="no">videoIDs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-GetYoutubeVideoIDs.html">GetYoutubeVideoIDs</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://www.youtube.com/watch?v=xxxxxxxx"</span>,
                                 <span class="st">"https://youtu.be/xxxxxxxx"</span>))</pre></body></html></div>
<p>The character vector containing the YouTube video IDs is then passed as a parameter to the <code><a href="../reference/Collect.html">Collect()</a></code> function (the following code also shows the YouTube access token being piped to <code><a href="../reference/Collect.html">Collect()</a></code>). In the following example, we are collecting comments from a YouTube video titled “Australia bushfires - a national catastrophe | DW News”, which was uploaded by the German Deutsche Welle news service on 5th January 2020. The comment data were collected on 10th January 2020: the total number of comments at that time was over 1100, but we are using the <code>maxComments</code> parameter to collect a maximum of 500 top-level comments (and all the reply comments to these top-level comments).</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="no">videoIDs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-GetYoutubeVideoIDs.html">GetYoutubeVideoIDs</a></span>(<span class="st">"https://www.youtube.com/watch?v=pJ_NyEYRkLQ"</span>)
<span class="no">youtubeData</span> <span class="kw">&lt;-</span> <span class="no">youtubeAuth</span> <span class="kw">%&gt;%</span>
               <span class="fu"><a href="../reference/Collect.html">Collect</a></span>(<span class="kw">videoIDs</span> <span class="kw">=</span> <span class="no">videoIDs</span>, <span class="kw">maxComments</span> <span class="kw">=</span> <span class="fl">500</span>, <span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>The <code><a href="../reference/Collect.html">Collect()</a></code> function takes the following arguments (when used for collecting YouTube data): <code>credential</code> (object generated from <code><a href="../reference/Authenticate.html">Authenticate()</a></code> with class name “youtube” (above we pass this via the pipe), <code>videoIDs</code> (character vector specifying one or more youtube video IDs), <code>maxComments</code> (numeric integer specifying how many top-level comments to collect from each video; default is 1e+13), <code>writeToFile</code> (whether to write the returned dataframe to disk as an <code>.rds</code> file; default is FALSE), and <code>verbose</code> (whether to output information about the data collection; default is FALSE).</p>
<p><code><a href="../reference/Collect.html">Collect()</a></code> returns a standard R dataframe (not a tibble) with the following structure (data have been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r">&gt; str(youtubeData)
Classes ‘dataource’, ‘youtube’ and 'data.frame':    603 obs. of  12 variables:
 $ Comment              : chr  "xxxxx" ...
 $ AuthorDisplayName    : chr  "xx" "xx" "xx" "xx" ...
 $ AuthorProfileImageUrl: chr  "https://xx" "https://xx" "https://xx" "https://xx" ...
 $ AuthorChannelUrl     : chr  "http://xx" "http://xx" "http://xx" "http://xx" ...
 $ AuthorChannelID      : chr  "xx" "xx" "xx" "xx" ...
 $ ReplyCount           : chr  "0" "0" "0" "0" ...
 $ LikeCount            : chr  "0" "0" "0" "0" ...
 $ PublishedAt          : chr  "2020-01-10T02:23:43.000Z" "2020-01-09T20:56:23.000Z"
                               "2020-01-09T20:44:00.000Z" "2020-01-09T19:31:32.000Z" ...
 $ UpdatedAt            : chr  "2020-01-10T02:23:43.000Z" "2020-01-09T20:56:23.000Z"
                               "2020-01-09T20:44:00.000Z" "2020-01-09T19:31:32.000Z" ...
 $ CommentID            : chr  "xx" "xx" "xx" "xx" ...
 $ ParentID             : chr  NA NA NA NA ...
 $ VideoID              : chr  "pJ_NyEYRkLQ" "pJ_NyEYRkLQ" "pJ_NyEYRkLQ" "pJ_NyEYRkLQ" ...</pre></body></html></div>
<p>Note that if you read the YouTube dataframe from disk, you will need to modify the class values for the object, before you can use it with <code>vosonSML</code>:</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="no">youtubeData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="st">"/path/to/data/data.rds"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">youtubeData</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html">append</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">youtubeData</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"datasource"</span>, <span class="st">"youtube"</span>))</pre></body></html></div>
</div>
<div id="creating-youtube-networks" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-youtube-networks" class="anchor"></a>Creating YouTube Networks</h2>
<p>It is currently possible to create two types of networks using YouTube data: (1) <em>actor network</em> and (2) <em>activity network</em>.</p>
<div id="actor-network-1" class="section level3">
<h3 class="hasAnchor">
<a href="#actor-network-1" class="anchor"></a>Actor Network</h3>
<p>In the YouTube <em>actor network</em> the nodes are users who have commented on videos (and the videos themselves are included in the network as special nodes) and the edges are the interactions between users in the comments. We can distinguish a <em>top-level comment</em>, which is a comment that is directed to a video from a <em>reply comment</em>, which is a comment directed to a top-level comment. The YouTube user interface does not allow a user to direct a reply to another reply. However, users can achieve the “reply to a reply” functionality by starting their comment with the username of the person that they are replying to (and they often prepend the username with “@”). So there will be an edge from user <em>i</em> to user <em>j</em> if <em>i</em> replied to a top-level comment authored by <em>j</em> or else <em>i</em> prepended their comment with <em>j</em>’s username.</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r"><span class="no">actorNetwork</span> <span class="kw">&lt;-</span> <span class="no">youtubeData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"actor"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">youtubeData</span>)
<span class="no">actorGraph</span> <span class="kw">&lt;-</span> <span class="no">actorNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("actor")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r">&gt; actorNetwork
$nodes
# A tibble: 522 x 3
   id                       screen_name                         node_type
   &lt;chr&gt;                    &lt;chr&gt;                               &lt;chr&gt;    
 1 xxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxx                      actor    
 2 xxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxx                       actor    
[snip] 
# … with 512 more rows

$edges
# A tibble: 604 x 6
   from      to       video_id comment_id   edge_type vosonTxt_comment          
   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;                     
 1 xxxxxxxx… VIDEOID… pJ_NyEY… xxxxxxxxxxx… comment   "xxxxx"
 2 xxxxxxxx… VIDEOID… pJ_NyEY… xxxxxxxxxxx… comment   "xxxxx"                  
[snip]
# … with 594 more rows

attr(,"class")
[1] "list"       "network"    "actor"      "youtube"    "voson_text"</pre></body></html></div>
<p>Note that in the above, <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> was used to add the comment text data to the network dataframe, stored as an edge attribute. Also, note that there is an optional parameter <code>replies_from_text</code> that can be passed to <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> when used with YouTube network creation, to extract the “reply to reply” comments.</p>
<p>This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object. Remember that it is possible to achieve the above using a single line of code:</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r"><span class="no">actorGraph</span> <span class="kw">&lt;-</span> <span class="no">youtubeData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"actor"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">youtubeData</span>) <span class="kw">%&gt;%</span>
              <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>The following is an an annonymised summary of the <code>igraph</code> graph object:</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r">&gt; actorGraph
IGRAPH 79e5456 DN-- 522 604 -- 
+ attr: type (g/c), name (v/c), screen_name (v/c), node_type (v/c),
| label (v/c), video_id (e/c), comment_id (e/c), edge_type (e/c),
| vosonTxt_comment (e/c)
+ edges from 79e5456 (vertex names):
[1] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[2] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[snip]
+ ... omitted several edges</pre></body></html></div>
<p>The YouTube actor network node contains a graph attribute <code>type</code> (set to “youtube”). The node attributes are: <code>name</code> (Channel ID, which is YouTube’s unique user ID), <code>screen_name</code> (the users displayed name), <code>node_type</code> (‘actor’ or ‘video’) and <code>label</code> (a concatenation of the ID and screen name). The edge attributes are: <code>video_id</code> (the ID of the video for which the data have been collected), <code>comment_id</code> (the ID of the comment), <code>edge_type</code> (whether the edge is a ‘comment’ i.e. top-level comment, ‘reply-comment’ i.e. reply to top-level comment or reply to reply or ‘self-loop’, which is a special edge connecting the video to itself, as a means of including text posted with the video). In the above example, because of our earlier use of <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code>, there is also an edge attribute <code>vosonTxt_comment</code> which is the text associated with the comment, reply or video.</p>
<p>The example YouTube actor network contains 522 nodes and 604 edges. The following indicates that there were 500 top-level comments (we constrained the collection to this number), 103 replies to top-level comments (note: we did not use <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> to collect replies embedded within the text), and there is the single self-loop from the video to itself.</p>
<div class="sourceCode" id="cb39"><html><body><pre class="r">&gt; table(E(actorGraph)$edge_type)
      comment reply-comment     self-loop 
          500           103             1 </pre></body></html></div>
<p>We can visualise this network, using red to identify the video node</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraph</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraph</span>)$<span class="no">node_type</span><span class="kw">==</span><span class="st">"video"</span>, <span class="st">"red"</span>, <span class="st">"grey"</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"youtube_actor.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">actorGraph</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/youtube_actor.png" alt=""><p class="caption">YouTube actor network (red node is video)</p>
</div>
<p>The following creates a subnetwork containing only the replies to top-level comments. In removing the other edges (top-level comments and the self-loop) we create a number isolate nodes (nodes with no connections): these are also removed. We have also used red to indicate the people who have written comments containing particular terms that have been present in the online commentary about the bushfires.</p>
<div class="sourceCode" id="cb41"><html><body><pre class="r"><span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/delete_edges.html">delete.edges</a></span>(<span class="no">actorGraph</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">actorGraph</span>)$<span class="no">edge_type</span><span class="kw">!=</span><span class="st">"reply-comment"</span>))
<span class="co">#By deleting edges other than "reply-comment", we now have 417 isolates</span>
<span class="co">#&gt; length(which(degree(g2)==0))</span>
<span class="co">#[1] 417</span>

<span class="no">g2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/delete_vertices.html">delete.vertices</a></span>(<span class="no">g2</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/degree.html">degree</a></span>(<span class="no">g2</span>)<span class="kw">==</span><span class="fl">0</span>))                    <span class="co">#remove the isolates</span>

<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="st">"grey"</span>
<span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/tail_of.html">tail_of</a></span>(<span class="no">actorGraph</span>,<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"arson|backburn|climate change"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">g2</span>)$<span class="no">vosonTxt_comment</span>)))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g2</span>)$<span class="no">color</span>[<span class="no">ind</span>] <span class="kw">&lt;-</span> <span class="st">"red"</span>

<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"youtube_actor_reply.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">g2</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/youtube_actor_reply.png" alt=""><p class="caption">YouTube actor network - only actors sending or receiving replies</p>
</div>
<p>Finally, the <code><a href="../reference/vosonSML-colon-colon-AddVideoData.html">AddVideoData()</a></code> function supplements the network data with additional video information.</p>
<div class="sourceCode" id="cb42"><html><body><pre class="r"><span class="no">actorNetwork_withVideoInfo</span> <span class="kw">&lt;-</span> <span class="no">actorNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddVideoData.html">AddVideoData</a></span>(<span class="no">youtubeAuth</span>)</pre></body></html></div>
<p><code><a href="../reference/vosonSML-colon-colon-AddVideoData.html">AddVideoData()</a></code> returns a named list containing three dataframes named “nodes” (identical to the dataframe contained in the list <code>actorNetwork</code> in the example able), “edges” (this has three additional columns: “video_title”, “video_description”, “video_published_at”) and a new dataframe “videos” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb43"><html><body><pre class="r">&gt; actorNetwork_withVideoInfo
$nodes
# A tibble: 522 x 3
   id                       screen_name                         node_type
   &lt;chr&gt;                    &lt;chr&gt;                               &lt;chr&gt;    
 1 xxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxx                       actor    
 2 xxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxx                       actor    
[snip]
# … with 512 more rows

$edges
# A tibble: 604 x 9
   from  to    video_id comment_id edge_type vosonTxt_comment video_title
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;      
 1 xxxx… xxxx… pJ_NyEY… xxxxxxxxx… comment   xxxxxxxxxxxx … Australia …
 2 xxxx… xxxx… pJ_NyEY… xxxxxxxxx… comment   "xxxx"         Australia …
[snip]
# … with 594 more rows, and 2 more variables: video_description &lt;chr&gt;,
#   video_published_at &lt;chr&gt;

$videos
# A tibble: 1 x 6
  VideoID  VideoTitle  VideoDescription  VideoPublishedAt ChannelID ChannelTitle
  &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;            &lt;chr&gt;     &lt;chr&gt;       
1 pJ_NyEY… Australia … "As Australia ba… 2020-01-05T12:3… UCknLrEd… DW News     

attr(,"class")
[1] "list"             "network"          "actor"            "youtube"         
[5] "voson_text"       "voson_video_data"</pre></body></html></div>
<p>It should also be noted that <code><a href="../reference/vosonSML-colon-colon-AddVideoData.html">AddVideoData()</a></code> can optionally substitute references to the video ID in the “nodes” and “edges” dataframes with the video publishers channel ID (this is done by setting the parameter <code>actorSubOnly</code> to TRUE.</p>
</div>
<div id="activity-network-1" class="section level3">
<h3 class="hasAnchor">
<a href="#activity-network-1" class="anchor"></a>Activity Network</h3>
<p>In the YouTube <em>activity network</em>, nodes are either comments or videos (videos represent a starting comment).</p>
<div class="sourceCode" id="cb44"><html><body><pre class="r"><span class="no">activityNetwork</span> <span class="kw">&lt;-</span> <span class="no">youtubeData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"activity"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">youtubeData</span>)
<span class="no">activityGraph</span> <span class="kw">&lt;-</span> <span class="no">activityNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("activity")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb45"><html><body><pre class="r">&gt; activityNetwork
$edges
# A tibble: 603 x 3
   from                       to                  edge_type
   &lt;chr&gt;                      &lt;chr&gt;               &lt;chr&gt;    
 1 xxxxxxxxxxxxxxxxxxxxxxxxxx VIDEOID:pJ_NyEYRkLQ comment  
 2 xxxxxxxxxxxxxxxxxxxxxxxxxx VIDEOID:pJ_NyEYRkLQ comment  
[snip]
# … with 593 more rows

$nodes
# A tibble: 604 x 8
   id    video_id published_at updated_at author_id screen_name node_type
   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;    
 1 xxxx… pJ_NyEY… 2020-01-10T… 2020-01-1… xxxxxxxx… xxxxxxxxxx… comment  
 2 xxxx… pJ_NyEY… 2020-01-09T… 2020-01-0… xxxxxxxx… xxxxxxxxxx… comment  
[snip]
# … with 594 more rows, and 1 more variable: vosonTxt_comment &lt;chr&gt;

attr(,"class")
[1] "list"       "network"    "activity"   "youtube"    "voson_text"</pre></body></html></div>
<p>Note that in the above, <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> was used to add the comment text data to the network dataframe, stored as a node attribute. This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object (this has been anonymised):</p>
<div class="sourceCode" id="cb46"><html><body><pre class="r">IGRAPH 02664d1 DN-- 604 603 -- 
+ attr: type (g/c), name (v/c), video_id (v/c), published_at (v/c),
| updated_at (v/c), author_id (v/c), screen_name (v/c), node_type
| (v/c), vosonTxt_comment (v/c), label (v/c), edge_type (e/c)
+ edges from 02664d1 (vertex names):
[1] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[2] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[3] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[4] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[5] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
[6] xxxx-&gt;VIDEOID:pJ_NyEYRkLQ
+ ... omitted several edges</pre></body></html></div>
<p>The YouTube activity network contains a graph attribute <code>type</code> (set to “youtube”). The node attributes are: <code>name</code> (character string ID number for the comment or video), <code>video_id</code> (character string ID of the video for which the comments collected - in this example, “pJ_NyEYRkLQ”), <code>published_at</code> (timestamp of when the comment was published, this is <code>NA</code> for the video itself), <code>updated_at</code> (timestamp of when a comment was updated), <code>author_id</code> (user’s Channel ID), <code>screen_name</code> (user’s display name), <code>node_type</code> (whether the node is a ‘comment’ i.e. top-level comment, ‘reply-comment’ i.e. reply to top-level comment or reply to reply or ‘video’), <code>vosonText_comment</code> (the comment text, <code>NA</code> for the video), <code>label</code> (concatenation of <code>name</code> and <code>screen_name</code>). The edge attributes <code>edge_type</code> which is ‘comment’ for all edges connecting a top-level comment to the video, and ‘reply-comment’ for all other edges.</p>
<p>The example YouTube activity network contains 604 nodes and 603 edges. The following is an <code>igrahp</code> visualisation of the network, where the video is indicated by a red node, and blue indicates comments that include one of the following terms: “arson”, “bakcburn”, “climate change”.</p>
<div class="sourceCode" id="cb47"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="st">"grey"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">color</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">node_type</span><span class="kw">==</span><span class="st">"video"</span>)] <span class="kw">&lt;-</span> <span class="st">"red"</span>
<span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"arson|backburn|climate change"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">vosonTxt_comment</span>))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">color</span>[<span class="no">ind</span>] <span class="kw">&lt;-</span> <span class="st">"blue"</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"youtube_activity.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">activityGraph</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/youtube_activity.png" alt=""><p class="caption">YouTube activity network (red node is video, blue nodes are comments mentioning particular terms)</p>
</div>
</div>
</div>
</div>
<div id="reddit" class="section level1">
<h1 class="hasAnchor">
<a href="#reddit" class="anchor"></a>Reddit</h1>
<p>The Reddit collection in <code>vosonSML</code> is based on the approach in <a href="https://cran.r-project.org/package=RedditExtractoR">RedditExtractoR</a>.</p>
<div id="authenticating-with-the-reddit-api" class="section level2">
<h2 class="hasAnchor">
<a href="#authenticating-with-the-reddit-api" class="anchor"></a>Authenticating with the Reddit API</h2>
<p>The <code>vosonSML</code> does not require Reddit API credentials to be provided. However, to keep the workflow consistent with the other data sources, we still need to create a “dummy” access token, using the <code><a href="../reference/Authenticate.html">Authenticate()</a></code> function (see below).</p>
</div>
<div id="collecting-data-from-reddit" class="section level2">
<h2 class="hasAnchor">
<a href="#collecting-data-from-reddit" class="anchor"></a>Collecting Data from Reddit</h2>
<p>To collect Reddit comment data, first construct a character vector containing the post URL(s).</p>
<div class="sourceCode" id="cb48"><html><body><pre class="r"><span class="no">myThreadUrls</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://www.reddit.com/r/xxxxxx/comments/xxxxxx/x_xxxx_xxxxxxxxx/"</span>,
                  <span class="st">"https://www.reddit.com/r/xxxxxx/comments/xxxxxx/x_xxxx_xxxxxxxxx/"</span>)</pre></body></html></div>
<p>This character vector is then passed as an argument to the <code><a href="../reference/Collect.html">Collect()</a></code> function. In the example below, a post relating to the politics around the Australian bushfires was used: <a href="https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/" class="uri">https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/</a>. This post was created on 7th January 2020 and by the time of data collection (10th January), it had attracted over 4000 comments. The maximum number of comments available for retrieval is 500 per thread or post.</p>
<p>Reddit has implemented a feature in their latest site re-design to branch off into new threads, when a thread reaches a breadth (diameter) of 10 comments. These appear as ‘Continue this thread’ links in thread discussions on the reddit site, and as new listing markers within the collected thread data. <code>vosonSML</code> follows these links with additional thread requests and collects comments from those as well, capturing a more complete data set, as the limit of 500 comments applies to each ‘new’ thread.</p>
<div class="sourceCode" id="cb49"><html><body><pre class="r"><span class="no">myThreadUrls</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/"</span>)
<span class="no">redditData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/Authenticate.html">Authenticate</a></span>(<span class="st">"reddit"</span>) <span class="kw">%&gt;%</span>
              <span class="fu"><a href="../reference/Collect.html">Collect</a></span>(<span class="kw">threadUrls</span> <span class="kw">=</span> <span class="no">myThreadUrls</span>, <span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>The <code><a href="../reference/Collect.html">Collect()</a></code> function takes the following arguments (when used for collecting Reddit data): <code>credential</code> (an object generated from <code><a href="../reference/Authenticate.html">Authenticate()</a></code> with class name “reddit” (above we pass this via the pipe), <code>threadUrls</code> (character vector of Reddit thread urls), <code>waitTime</code> (a numeric vector giving the time range in seconds to select random wait url collection requests; default is <code><a href="https://rdrr.io/r/base/c.html">c(3, 10)</a></code> i.e. random wait between 3 and 10 seconds), <code>ua</code> (User-Agent string; default is <code><a href="https://rdrr.io/r/base/options.html">option("HTTPUserAgent")</a></code> as set by vosonSML, <code>writeToFile</code> (whether to write the returned dataframe to file as an <code>.rds</code> file; default is FALSE), <code>verbose</code> (whether to output information about the data collection; default is TRUE).</p>
<p>The <code><a href="../reference/Collect.html">Collect()</a></code> function returns a <code>tibble</code> dataframe (this output has been anonymised):</p>
<div class="sourceCode" id="cb50"><html><body><pre class="r">&gt; str(redditData)
Classes ‘tbl_df’, ‘tbl’, ‘datasource’, ‘reddit’ and 'data.frame':   767 obs. of  22 variables:
 $ id              : int  1 2 3 4 5 6 7 8 9 10 ...
 $ structure       : chr  "1" "4_1_1_1_1_1_1_1_1_1" "4_1_1_4_2_1_1_1_1_1" "4_1_1_4_3_1_1_1_3_1" ...
 $ post_date       : chr  "2020-01-07 14:34:58" "2020-01-07 14:34:58" "2020-01-07 14:34:58" "2020-01-07 14:34:58" ...
 $ post_date_unix  : num  1.58e+09 1.58e+09 1.58e+09 1.58e+09 1.58e+09 ...
 $ comm_id         : chr  "xxxx" "xxxx" "xxxx" "xxxx" ...
 $ comm_date       : chr  "2020-01-07 19:11:10" "2020-01-07 21:04:05" "2020-01-07 20:15:49" "2020-01-07 21:24:01" ...
 $ comm_date_unix  : num  1.58e+09 1.58e+09 1.58e+09 1.58e+09 1.58e+09 ...
 $ num_comments    : int  4435 4435 4435 4435 4435 4435 4435 4435 4435 4435 ...
 $ subreddit       : chr  "worldnews" "worldnews" "worldnews" "worldnews" ...
 $ upvote_prop     : num  0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 ...
 $ post_score      : int  45714 45714 45714 45712 45714 45710 45720 45712 45708 45711 ...
 $ author          : chr  "xxxx" "xxxx" "xxxx" "xxxx" ...
 $ user            : chr  "xxxx" "xxxx" "xxxx" "xxxx" ...
 $ comment_score   : int  1904 136 17 13 9 9 125 4 6 12 ...
 $ controversiality: int  0 0 0 0 0 0 0 0 0 0 ...
 $ comment         : chr  "xxxx...
 $ title           : chr  "Australia’s leaders deny link between climate change and the country’s devastating bushfires" "Australia’s leaders deny link between climate change and the country’s devastating bushfires" "Australia’s leaders deny link between climate change and the country’s devastating bushfires" "Australia’s leaders deny link between climate change and the country’s devastating bushfires" ...
 $ post_text       : chr  "" "" "" "" ...
 $ link            : chr  "https://www.theglobeandmail.com/world/article-australias-leaders-unmoved-on-climate-action-after-devastating-2/" "https://www.theglobeandmail.com/world/article-australias-leaders-unmoved-on-climate-action-after-devastating-2/" "https://www.theglobeandmail.com/world/article-australias-leaders-unmoved-on-climate-action-after-devastating-2/" "https://www.theglobeandmail.com/world/article-australias-leaders-unmoved-on-climate-action-after-devastating-2/" ...
 $ domain          : chr  "theglobeandmail.com" "theglobeandmail.com" "theglobeandmail.com" "theglobeandmail.com" ...
 $ url             : chr  "https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/" "https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/" "https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/" "https://www.reddit.com/r/worldnews/comments/elcb9b/australias_leaders_deny_link_between_climate/" ...
 $ thread_id       : chr  "elcb9b" "elcb9b" "elcb9b" "elcb9b" ...</pre></body></html></div>
<p>Note that if you read the Reddit dataframe from disk, you will need to modify the class values for the object, before you can use it with <code>vosonSML</code>:</p>
<div class="sourceCode" id="cb51"><html><body><pre class="r"><span class="no">redditData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="st">"/path/to/data/data.rds"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">redditData</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html">append</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">redditData</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"datasource"</span>, <span class="st">"reddit"</span>))</pre></body></html></div>
</div>
<div id="creating-reddit-networks" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-reddit-networks" class="anchor"></a>Creating Reddit Networks</h2>
<p>It is currently possible to create two types of networks using Reddit data: (1) <em>actor network</em> and (2) <em>activity network</em>.</p>
<div id="actor-network-2" class="section level3">
<h3 class="hasAnchor">
<a href="#actor-network-2" class="anchor"></a>Actor Network</h3>
<p>In the Reddit <em>actor network</em>, nodes represent users who have posted original posts and comments and the edges are the interactions between users in the comments i.e. where there is an edge from user <em>i</em> to user <em>j</em> if <em>i</em> writes a comment that replies to user <em>j</em>’s comment (or the original post).</p>
<p>The following creates a Reddit <em>actor network</em> with comment text as an edge attribute (as above, this can be achieved in a single line of code, but we split it into two lines to better explain the objects that are created).</p>
<div class="sourceCode" id="cb52"><html><body><pre class="r"><span class="no">actorNetwork</span> <span class="kw">&lt;-</span> <span class="no">redditData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"actor"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">redditData</span>)
<span class="no">actorGraph</span> <span class="kw">&lt;-</span> <span class="no">actorNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("actor")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb53"><html><body><pre class="r">&gt; actorNetwork
$nodes
# A tibble: 439 x 2
      id user               
   &lt;int&gt; &lt;chr&gt;              
 1     1 xxxxxxxxxx         
 2     2 xxxxxxxxxxxxxx     
[snip]
# … with 429 more rows

$edges
# A tibble: 768 x 8
    from    to subreddit thread_id comment_id comm_id vosonTxt_comment     title
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt;
 1     1   439 worldnews elcb9b             1 xxxxxxx "xxxxxxxxxxxxxxxxxxx NA   
 2     2    73 worldnews elcb9b             2 xxxxxxx "xxxxxxxxxxxxxxxxxxx NA   
[snip]
… with 758 more rows

attr(,"class")
[1] "list"       "network"    "actor"      "reddit"     "voson_text"</pre></body></html></div>
<p>Note that in the above, <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> was used to add the comment text data to the network dataframe, stored as an edge attribute. This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object:</p>
<div class="sourceCode" id="cb54"><html><body><pre class="r">&gt; actorGraph
IGRAPH 5a5d5b9 DN-- 439 768 -- 
+ attr: type (g/c), name (v/c), user (v/c), label (v/c), subreddit
| (e/c), thread_id (e/c), comment_id (e/n), comm_id (e/c),
| vosonTxt_comment (e/c), title (e/c)
+ edges from 5a5d5b9 (vertex names):
 [1] 1 -&gt;439 2 -&gt;73  3 -&gt;113 4 -&gt;120 5 -&gt;120 6 -&gt;17  7 -&gt;194 8 -&gt;20  9 -&gt;20 
[10] 10-&gt;165 11-&gt;165 12-&gt;1   13-&gt;2   14-&gt;3   15-&gt;4   16-&gt;5   17-&gt;6   18-&gt;7  
[19] 19-&gt;8   20-&gt;9   21-&gt;10  22-&gt;11  23-&gt;12  2 -&gt;13  24-&gt;3   7 -&gt;18  25-&gt;23 
[28] 26-&gt;2   3 -&gt;24  27-&gt;18  28-&gt;1   29-&gt;2   18-&gt;27  1 -&gt;28  30-&gt;2   31-&gt;7  
[37] 25-&gt;1   32-&gt;2   33-&gt;31  34-&gt;1   2 -&gt;32  35-&gt;7   25-&gt;34  36-&gt;2   7 -&gt;35 
[46] 37-&gt;1   38-&gt;2   39-&gt;7   40-&gt;1   41-&gt;2   42-&gt;7   43-&gt;1   2 -&gt;41  44-&gt;7  
+ ... omitted several edges</pre></body></html></div>
<p>The Reddit actor network contains a graph attribute <code>type</code> (set to “reddit”). The node attributes are: <code>name</code> (sequential ID number for actor, generated by <code>vosonSML</code>), <code>user</code> (Reddit handle or screen name)) and <code>label</code> (a concatenation of the ID and screen name). The edge attributes are: <code>subreddit</code> (the subreddit from which the post is collected), <code>thread_id</code> (the 6 character ID of the thread or post), <code>comment_id</code> (sequential ID number for comment, generated by <code>vosonSML</code>). There is also an edge attribute <code>title</code>, which is set to <code>NA</code> for all comments except the comment representing the original post. Further note that the original post is represented as a self-loop edge from the user who authored the post (and this is how the post text can be accessed, as an edge attribute), however with the Reddit actor network, there is no <code>edge_type</code> attribute. Finally, because we used <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> in the above example, there is also an edge attribute <code>vosonTxt_comment</code> which is the text associated with the comment, or original post.</p>
<p>The example Reddit actor network contains 439 nodes and 768 edges. The following is a visualisation of the actor network, where the author of the post is indicated by a red node, and blue nodes indicate those people who mentioned “arson” or “starting fires” in at least one of their comments.</p>
<div class="sourceCode" id="cb55"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraph</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="st">"grey"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraph</span>)$<span class="no">color</span>[<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/tail_of.html">tail_of</a></span>(<span class="no">actorGraph</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(!<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">actorGraph</span>)$<span class="no">title</span>)))] <span class="kw">&lt;-</span> <span class="st">"red"</span>
<span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/tail_of.html">tail_of</a></span>(<span class="no">actorGraph</span>,<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"arson|starting fires"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/E.html">E</a></span>(<span class="no">actorGraph</span>)$<span class="no">vosonTxt_comment</span>)))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">actorGraph</span>)$<span class="no">color</span>[<span class="no">ind</span>] <span class="kw">&lt;-</span> <span class="st">"blue"</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"reddit_actor.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">actorGraph</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/reddit_actor.png" alt=""><p class="caption">Reddit actor network (red node is author of post, blue nodes are users who mentioned arson)</p>
</div>
</div>
<div id="activity-network-2" class="section level3">
<h3 class="hasAnchor">
<a href="#activity-network-2" class="anchor"></a>Activity Network</h3>
<p>In the Reddit <em>activity network</em>, nodes are either comments and/or initial thread posts and the edges represent replies to the original post, or replies to comments.</p>
<div class="sourceCode" id="cb56"><html><body><pre class="r"><span class="no">activityNetwork</span> <span class="kw">&lt;-</span> <span class="no">redditData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"activity"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-AddText.html">AddText</a></span>(<span class="no">redditData</span>)
<span class="no">activityGraph</span> <span class="kw">&lt;-</span> <span class="no">activityNetwork</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><code><a href="../reference/Create.html">Create("activity")</a></code> returns a named list containing two dataframes named “nodes” and “edges” (the following has been modified to preserve anonymity):</p>
<div class="sourceCode" id="cb57"><html><body><pre class="r">&gt; activityNetwork
$nodes
# A tibble: 768 x 10
   id    thread_id comm_id datetime     ts subreddit user  node_type
   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    
 1 elcb… elcb9b    xxxxxxx 2020-01… 1.58e9 worldnews xxxx… comment  
 2 elcb… elcb9b    xxxxxxx 2020-01… 1.58e9 worldnews xxxx… comment  
[snip]
# … with 758 more rows, and 2 more variables: vosonTxt_comment &lt;chr&gt;,
#   title &lt;chr&gt;

$edges
# A tibble: 767 x 3
   from                       to                       edge_type
   &lt;chr&gt;                      &lt;chr&gt;                    &lt;chr&gt;    
 1 elcb9b.1                   elcb9b.0                 comment  
 2 elcb9b.4_1_1_1_1_1_1_1_1_1 elcb9b.4_1_1_1_1_1_1_1_1 comment  
[snip]
# … with 757 more rows

attr(,"class")
[1] "list"       "network"    "activity"   "reddit"     "voson_text"</pre></body></html></div>
<p>Note that in the above, <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> was used to add the comment text data to the network dataframe, stored as a node attribute. This list is then passed to <code><a href="../reference/vosonSML-colon-colon-Graph.html">Graph()</a></code>, which returns an <code>igraph</code> graph object:</p>
<div class="sourceCode" id="cb58"><html><body><pre class="r">&gt; activityGraph
IGRAPH 09e30ea DN-- 768 767 -- 
+ attr: type (g/c), name (v/c), thread_id (v/c), comm_id (v/c),
| datetime (v/c), ts (v/n), subreddit (v/c), user (v/c), node_type
| (v/c), vosonTxt_comment (v/c), title (v/c), label (v/c), edge_type
| (e/c)
+ edges from 09e30ea (vertex names):
[1] elcb9b.1                  -&gt;elcb9b.0                
[2] elcb9b.4_1_1_1_1_1_1_1_1_1-&gt;elcb9b.4_1_1_1_1_1_1_1_1
[3] elcb9b.4_1_1_4_2_1_1_1_1_1-&gt;elcb9b.4_1_1_4_2_1_1_1_1
[4] elcb9b.4_1_1_4_3_1_1_1_3_1-&gt;elcb9b.4_1_1_4_3_1_1_1_3
[5] elcb9b.4_1_1_4_3_1_1_1_3_2-&gt;elcb9b.4_1_1_4_3_1_1_1_3
+ ... omitted several edges</pre></body></html></div>
<p>The Reddit activity network contains a graph attribute <code>type</code> (set to “reddit”). The node attributes are: <code>name</code> (string showing position of the comment in the thread), <code>date</code> (date when the comment was authored, in DD-MM-YY format), <code>subreddit</code> (the subreddit from which the post is collected), <code>user</code> (Reddit handle or screen name of the user who authored the comment or post), <code>node_type</code> (‘comment’ or ‘thread’), <code>title</code> (<code>NA</code> for all nodes except that representing the original post), <code>label</code> (a concatenation of <code>name</code> and <code>user</code>). Because we used <code><a href="../reference/vosonSML-colon-colon-AddText.html">AddText()</a></code> in the above example, there is also a node attribute <code>vosonTxt_comment</code> which is the text from the comment, or original post. The edge attributes is <code>edge_type</code> which is ‘comment’ for all edges.</p>
<p>The example Reddit activity network contains 768 nodes and 767 edges. The following is a visualisation of the network, where the post is indicated by a red node, and blue indicates those comments that include the words “arson” or “starting fires”.</p>
<div class="sourceCode" id="cb59"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">color</span> <span class="kw">&lt;-</span> <span class="st">"grey"</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">color</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">node_type</span><span class="kw">==</span><span class="st">"thread"</span>)] <span class="kw">&lt;-</span> <span class="st">"red"</span>
<span class="no">ind</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">"arson|starting fires"</span>,<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">vosonTxt_comment</span>))
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">activityGraph</span>)$<span class="no">color</span>[<span class="no">ind</span>] <span class="kw">&lt;-</span> <span class="st">"blue"</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span>(<span class="st">"reddit_activity.png"</span>, <span class="kw">width</span><span class="kw">=</span><span class="fl">600</span>, <span class="kw">height</span><span class="kw">=</span><span class="fl">600</span>)
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">activityGraph</span>, <span class="kw">vertex.label</span><span class="kw">=</span><span class="st">""</span>, <span class="kw">vertex.size</span><span class="kw">=</span><span class="fl">4</span>, <span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span>()</pre></body></html></div>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/reddit_activity.png" alt=""><p class="caption">Reddit activity network (red node is intial post, blue nodes are comments mentioning arson)</p>
</div>
</div>
</div>
</div>
<div id="merging-collected-data" class="section level1">
<h1 class="hasAnchor">
<a href="#merging-collected-data" class="anchor"></a>Merging Collected Data</h1>
<p>Data that was collected at different times, used different collect parameters or was saved to multiple files can be merged by using functions that operate on dataframes. The data from <code>Collect</code> is output in <code>tibble</code> (dataframe) format and provided each collected data set are from the same social media type can be combined using the <code>rbind</code> function.</p>
<p>In the examples below or cases that involve large datasets, it can sometimes be more efficient or timely to substitute optimized functions such as <code><a href="https://dplyr.tidyverse.org/reference/bind.html">dplyr::bind_rows</a></code> for <code>rbind</code> or <code><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html">data.table::rbindlist</a></code> instead of <code><a href="https://rdrr.io/r/base/do.call.html">do.call("rbind", list)</a></code>.</p>
<div id="merging-from-multiple-collect-operations" class="section level2">
<h2 class="hasAnchor">
<a href="#merging-from-multiple-collect-operations" class="anchor"></a>Merging from multiple Collect operations</h2>
<p>Data collected in the same session can be merged using the <code>rbind</code> function. The following twitter example combines tweet data collected using different search parameters. The result is combined most <code>recent</code> tweets using the <code>#auspol</code> hashtag and most <code>popular</code> tweets using the <code>#bushfire</code> hashtag.</p>
<div class="sourceCode" id="cb60"><html><body><pre class="r"><span class="co"># collect twitter data for the #auspol hashtag</span>
<span class="no">auspolTwitterData</span> <span class="kw">&lt;-</span> <span class="no">twitterAuth</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/Collect.html">Collect</a></span>(<span class="kw">searchTerm</span> <span class="kw">=</span> <span class="st">"#auspol"</span>, <span class="kw">searchType</span> <span class="kw">=</span> <span class="st">"recent"</span>, <span class="kw">numTweets</span> <span class="kw">=</span> <span class="fl">100</span>)

<span class="co"># collect twitter data for the #bushfire hashtag</span>
<span class="no">bushfireTwitterData</span> <span class="kw">&lt;-</span> <span class="no">twitterAuth</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/Collect.html">Collect</a></span>(<span class="kw">searchTerm</span> <span class="kw">=</span> <span class="st">"#bushfire"</span>, <span class="kw">searchType</span> <span class="kw">=</span> <span class="st">"popular"</span>, <span class="kw">numTweets</span> <span class="kw">=</span> <span class="fl">50</span>)

<span class="co"># combine the collected data for the different hashtags using rbind</span>
<span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">auspolTwitterData</span>, <span class="no">bushfireTwitterData</span>)</pre></body></html></div>
</div>
<div id="merging-from-file" class="section level2">
<h2 class="hasAnchor">
<a href="#merging-from-file" class="anchor"></a>Merging from file</h2>
<p><code>vosonSML</code> has a function for importing previously saved collected data from file so that, it can be correctly handled and used in subsequent processsing functions. This example shows how to import and merge twitter data collected the previous day with newly collected data using <code>rbind</code> and the <code>ImportData</code> function.</p>
<p>Please note that <code>ImportData</code> requires the file path and social media type either “twitter”, “youtube” or “reddit” to be specified as parameters.</p>
<div class="sourceCode" id="cb61"><html><body><pre class="r"><span class="co"># collect twitter data</span>
<span class="no">newTwitterData</span> <span class="kw">&lt;-</span> <span class="no">twitterAuth</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/Collect.html">Collect</a></span>(<span class="kw">searchTerm</span> <span class="kw">=</span> <span class="st">"#auspol"</span>, <span class="kw">searchType</span> <span class="kw">=</span> <span class="st">"recent"</span>, <span class="kw">numTweets</span> <span class="kw">=</span> <span class="fl">100</span>)

<span class="co"># import data from file using ImportData</span>
<span class="no">prevTwitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-ImportData.html">ImportData</a></span>(<span class="st">"2020-02-26_143505-TwitterData.rds"</span>, <span class="st">"twitter"</span>)

<span class="co"># add to imported data the new data using rbind</span>
<span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">prevTwitterData</span>, <span class="no">newTwitterData</span>)</pre></body></html></div>
</div>
<div id="merging-files-in-a-directory" class="section level2">
<h2 class="hasAnchor">
<a href="#merging-files-in-a-directory" class="anchor"></a>Merging files in a directory</h2>
<p>If there are many data collections to be merged from file it may be useful to use <code>rbind</code> in conjuction with <code>lapply</code>. In this example a list of twitter collection files in the <code>2019TwitterBushfireData</code> directory that end in “TwitterData.rds” are passed into an <code>lapply</code> function. This imports each dataset with <code>ImportData</code> and is then added to a list of dataframes that is combined with <code>rbind</code> for the final result.</p>
<div class="sourceCode" id="cb62"><html><body><pre class="r"><span class="co"># vector of file names matching *TwitterData.rds to combine from directory</span>
<span class="no">importFiles</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="kw">path</span> <span class="kw">=</span> <span class="st">"D:\\2019TwitterBushfireData"</span>,
                          <span class="kw">pattern</span> <span class="kw">=</span> <span class="st">"*TwitterData.rds"</span>,
                          <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># combine imported data from files with apply and rbind</span>
<span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(<span class="st">"rbind"</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">importFiles</span>,
                                       <span class="kw">function</span>(<span class="no">x</span>) { <span class="fu"><a href="../reference/vosonSML-colon-colon-ImportData.html">ImportData</a></span>(<span class="no">x</span>, <span class="st">"twitter"</span>) }))</pre></body></html></div>
</div>
<div id="duplicate-data" class="section level2">
<h2 class="hasAnchor">
<a href="#duplicate-data" class="anchor"></a>Duplicate data</h2>
<p>Depending on type of collections being performed, there may be duplicate data or rows in the combined dataframes. This is generally not a problem for <code>vosonSML</code> network creation, however it may sometimes be useful to address in order to reduce the size of the data being processed. This can be achieved in many ways but is probably acomplished most easily using the <code>unique</code> or <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">dplyr::distinct</a></code> function. In the example below the unique tweet identifier “status_id” is used with <code>distinct</code> to choose which columns to identify distinct values from. For youtube the identifier columns “VideoID” and “CommentID” and for reddit “thread_id” and “comm_id” can be used instead of “status_id”.</p>
<div class="sourceCode" id="cb63"><html><body><pre class="r"><span class="co"># load dplyr</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)

<span class="co"># combine the collected data using rbind and remove duplicates with distinct based on tweet status_id </span>
<span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">auspolTwitterData</span>, <span class="no">bushfireTwitterData</span>) <span class="kw">%&gt;%</span>
   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">status_id</span>, <span class="kw">.keep_all</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p>If unique rows can change over time such as a tweets retweet count, or perhaps youtube video / reddit thread comments being updated then a strategy will need to be adopted to choose the desired version to keep between dataframes. The <code>distinct</code> function will keep the first found row that contains a duplicate identifier, so it is often useful to arrange the rows so that more recent record comes first in the combined dataframe and is kept. With twitter data, the easiest way to do this is to perform the <code>rbind</code> with twitter dataframes in reverse order (chronological) with the most recent collect data first. For youtube and reddit, the rows can be arranged by the “UpdatedAt” and “comm_date_unix” timestamp values respectively. The <code>dplyr</code> package again provides a convenient function for sorting or arranging rows called <code>arrange</code>.</p>
<div class="sourceCode" id="cb64"><html><body><pre class="r"><span class="co"># manually combine data sets in reverse chronological order and remove duplicates based on status_id </span>
<span class="no">twitterData</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">bushfireTwitterData</span>, <span class="no">auspolTwitterData</span>) <span class="kw">%&gt;%</span>
   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">status_id</span>, <span class="kw">.keep_all</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># arrange combined youtube data by updated timestamp and remove duplicates, keeping the version of a</span>
<span class="co"># duplicate video comment that was most recently updated</span>
<span class="no">youtubeData</span> <span class="kw">&lt;-</span> <span class="no">youtubeData</span> <span class="kw">%&gt;%</span>
   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="no">UpdatedAt</span>)) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">VideoID</span>, <span class="no">CommentID</span>, <span class="kw">.keep_all</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># arrange combined reddit data by comment timestamp and remove duplicates, keeping the version of a</span>
<span class="co"># duplicate thread comment that was most recently updated</span>
<span class="no">redditData</span> <span class="kw">&lt;-</span> <span class="no">redditData</span> <span class="kw">%&gt;%</span>
   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="no">comm_date_unix</span>)) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">thread_id</span>, <span class="no">comm_id</span>, <span class="kw">.keep_all</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
</div>
<div id="creating-a-network-and-graph-from-merged-data" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-network-and-graph-from-merged-data" class="anchor"></a>Creating a network and graph from merged data</h2>
<p>Once the data is merged then it can then simply be passed to the <code>Create</code> function to create a network as per the usual <code>vosonSML</code> work flow.</p>
<div class="sourceCode" id="cb65"><html><body><pre class="r"><span class="co"># create an igraph of twitter actor network</span>
<span class="no">actorGraph</span> <span class="kw">&lt;-</span> <span class="no">twitterData</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/Create.html">Create</a></span>(<span class="st">"actor"</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/vosonSML-colon-colon-Graph.html">Graph</a></span>(<span class="kw">writeToFile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
</div>
</div>
<div id="voson-dashboard" class="section level1">
<h1 class="hasAnchor">
<a href="#voson-dashboard" class="anchor"></a>VOSON Dashboard</h1>
<p>It is possible to import a network created using <code>vosonSML</code>, and saved as a “.graphml” file, into <code>VOSON Dashboard</code>. However, if you have created a categorical node attribute in the network and wish to plot networks in <code>VOSON Dashboard</code> with node colour reflecting the node attribute, then the node attribute name has to be pre-pended with “vosonCA_”. This let’s <code>VOSON Dashboard</code> know the attribute is to be treated as categorical.</p>
<p>Above, we created a Twitter subnetwork: the giant component in the reply network, with red nodes indicating those users who tweeted using the word “bushfire”. We did this by created a node attribute “tweetedBushfires”. For <code>VOSON Dashboard</code> to recognise this node attribute, it has to be named “vosonCA_tweetedBushfires”. The following code creates a new node attribute with this name, and sames the network as a graphml file:</p>
<div class="sourceCode" id="cb66"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g3</span>)$<span class="no">vosonCA_tweetedBushfires</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span>(<span class="no">g3</span>)$<span class="no">tweetedBushfires</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/write_graph.html">write.graph</a></span>(<span class="no">g3</span>, <span class="st">"g3.graphml"</span>, <span class="kw">format</span><span class="kw">=</span><span class="st">"graphml"</span>)</pre></body></html></div>
<p>The following shows a screenshot of <code>VOSON Dashboard</code> with this network loaded and the “tweetedBushfires” attribute has been seleced to be reflected in the node colour.</p>
<div class="figure">
<img src="https://vosonlab.github.io/vosonSML/images/intro-to-vosonsml/voson_dashboard.png" alt=""><p class="caption">VOSON Dashboard with Twitter network of users who tweeted using the word “bushfire”</p>
</div>
</div>
<div id="acknowledgements" class="section level1">
<h1 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h1>
<p><code>vosonSML</code> and <code>VOSON Dashboard</code> are developed and maintained at the <a href="http://vosonlab.net/">Virtual Observatory for the Study of Online Networks (VOSON) Lab</a> at the Australian National University.</p>
<p><code>vosonSML</code> was originally released on CRAN in November 2015 as the package <code>SocialMediaLab</code> (Timothy Graham was the lead developer), with the significantly revised and renamed <code>vosonSML</code> being released on CRAN in July 2018 (Bryan Gertzel is the lead developer).</p>
<p>We acknowledge the contributions of Chung-hong Chan who implemented a revised UI (involving <code>magrittr</code>) in the original <code>SocialMediaLab</code> package and Xiaolan Cai who has contributed to documentation.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://vosonlab.net"><span>VOSON Lab</span></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
